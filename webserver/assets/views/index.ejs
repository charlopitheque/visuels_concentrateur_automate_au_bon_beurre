<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Dashboard</title>
        <meta name="description" content="dashboard">
        <link rel="stylesheet" href="../static/css/main.css">
    </head>
    <body>
        <div>
            <form>
                <label for="unit-select">Choose a unit :</label>
                <select id="unit-select">
                    <option value="1">Unit 1</option>
                    <option value="2">Unit 2</option>
                    <option value="3">Unit 3</option>
                    <option value="4">Unit 4</option>
                    <option value="5">Unit 5</option>
                    <button id="switch-unit">Switch unit</button>
                </select>
            </form>
        </div>
        <div style="width:75%;">
            <canvas id="canvas" class="canvas"></canvas>
            <canvas class="canvas"></canvas>
            <canvas class="canvas"></canvas>
            <canvas class="canvas"></canvas>
            <canvas class="canvas"></canvas>
            <canvas class="canvas"></canvas>
            <canvas class="canvas"></canvas>
            <canvas class="canvas"></canvas>
            <canvas class="canvas"></canvas>
            <canvas class="canvas"></canvas>
        </div>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>


        
        
        <script>
                var MONTHS = ['10h01','10h02','10h03','10h04','10h05','10h06','10h07','10h08','10h09','10h10','10h11','10h12','10h13','10h14','10h15','10h16','10h17','10h18','10h19','10h20'];
                var configTempCuve = {
                    type: 'line',
                    data: {
                        labels: ['10h01','10h02','10h03','10h04','10h05','10h06','10h07','10h08','10h09','10h10','10h11','10h12','10h13','10h14','10h15','10h16','10h17','10h18','10h19','10h20'],
                        datasets: [
                            {
                                label: 'Automate 1',
                                backgroundColor: '#ff0000' ,
                                borderColor: '#FF0000',
                                data: [10,20,30,40,50,60,70,80,90,100,90,80,70,60,50,40,30,20,10,50],
                                fill: false,
                            },
                        ]
                    },
                    options: {
                        responsive: true,
                        title: {
                            display: true,
                            text: ''
                        },
                        tooltips: {
                            mode: 'index',
                            intersect: false,
                        },
                        hover: {
                            mode: 'nearest',
                            intersect: true
                        },
                        scales: {
                            xAxes: [{
                                display: true,
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Month'
                                }
                            }],
                            yAxes: [{
                                display: true,
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Value'
                                }
                            }]
                        }
                    }
                };
        
                window.onload = function() {
                    let i
                    //document.getElementsByClassName('canvas').forEach((element)=>{
                      //  var ctx = element.getContext('2d');
                        //window.charts[i++] = new Chart(ctx, config);
                    //})
                    var ctx = document.getElementById("canvas").getContext("2d");
                    window.myLine = new Chart(ctx, configTempCuve);
                    
                };
                
                document.getElementById('switch-unit').addEventListener('click', function() {
                    //call switch unit route 
                   // window.myLine.update();
                });

                document.getElementById('randomizeData').addEventListener('click', function() {
                    config.data.datasets.forEach(function(dataset) {
                        dataset.data = dataset.data.map(function() {
                            return randomScalingFactor();
                        });
        
                    });
        
                    window.myLine.update();
                });
        
                var colorNames = Object.keys(window.chartColors);
                document.getElementById('addDataset').addEventListener('click', function() {
                    var colorName = colorNames[config.data.datasets.length % colorNames.length];
                    var newColor = window.chartColors[colorName];
                    var newDataset = {
                        label: 'Dataset ' + config.data.datasets.length,
                        backgroundColor: newColor,
                        borderColor: newColor,
                        data: [],
                        fill: false
                    };
        
                    for (var index = 0; index < config.data.labels.length; ++index) {
                        newDataset.data.push(randomScalingFactor());
                    }
        
                    config.data.datasets.push(newDataset);
                    window.myLine.update();
                });
        
                document.getElementById('addData').addEventListener('click', function() {
                    if (config.data.datasets.length > 0) {
                        var month = MONTHS[config.data.labels.length % MONTHS.length];
                        config.data.labels.push(month);
        
                        config.data.datasets.forEach(function(dataset) {
                            dataset.data.push(randomScalingFactor());
                        });
        
                        window.myLine.update();
                    }
                });
        
                document.getElementById('removeDataset').addEventListener('click', function() {
                    config.data.datasets.splice(0, 1);
                    window.myLine.update();
                });
        
                document.getElementById('removeData').addEventListener('click', function() {
                    config.data.labels.splice(-1, 1); // remove the label first
        
                    config.data.datasets.forEach(function(dataset) {
                        dataset.data.pop();
                    });
        
                    window.myLine.update();
                });
            </script>
    </body>
</html>